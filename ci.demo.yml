schemaVersion: v0.2
prepare:
  steps:
    - name: Prepare Flutter Environment
      command: nix-env -i -f ~/app/configuration.nix
    - name: Install Frontend Dependencies
      command: cd /home/user/app/demo_app/ && flutter pub get
    - name: Build Flutter Web App
      command: cd /home/user/app/demo_app/ && flutter clean && flutter build web
    - name: Check Dart Version
      command: dart --version
test:
  steps: []
run:
  app:
    steps:
      - name: Run App in Debug
        command: cd /home/user/app/demo_app/build/web && python3 -m http.server 3000
    plan: 8
    replicas: 1
    network:
      ports:
        - port: 3000
          isPublic: false
      paths:
        - port: 3000
          path: /
          stripPath: false
