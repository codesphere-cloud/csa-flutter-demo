schemaVersion: v0.2
prepare:
  steps:
    - name: Update nix
      command: curl -L https://nixos.org/nix/install | sh
    - name: Prepare Flutter Environment
      command: nix-env -i -f ~/app/configuration.nix
    - name: Install Dependencies
      command: cd /home/user/app/demo_app/ && flutter clean && flutter pub get
test:
  steps: []
run:
  app:
    steps:
      - name: Install Dependencies
        command: cd /home/user/app/demo_app/ && flutter clean && flutter pub get
      - name: Run App in Debug
        command: cd /home/user/app/demo_app/ && flutter run -d web-server
          --web-hostname=0.0.0.0 --web-port=3000
    plan: 201
    replicas: 1
    network:
      ports:
        - port: 3000
          isPublic: false
      paths:
        - port: 3000
          path: /
          stripPath: false